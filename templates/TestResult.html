<!DOCTYPE html>
<html lang="zxx">
<head>
	<title>小伙冲冲冲|测试集结果</title>
	<meta charset="UTF-8">

	<meta name="keywords" content="photo, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Stylesheets -->
	<link rel="stylesheet" href={{ url_for('static',filename='css/bootstrap.min.css')}}>
	<link rel="stylesheet" href={{ url_for('static',filename='css/font-awesome.min.css')}}>
	<link rel="stylesheet" href={{ url_for('static',filename='css/slicknav.min.css')}}>
    <link rel="stylesheet" href={{ url_for('static',filename='css/fresco.css')}}>
	<!-- Main Stylesheets -->
	<link rel="stylesheet" href={{ url_for('static',filename='css/style.css')}}>
	
	<!-- 引入echart -->
    <script src={{ url_for('static',filename='js/echarts.min.js') }}></script>
	<script src={{ url_for('static',filename='js/walden.js') }}></script>
    <script src={{ url_for('static',filename='js/jquery-3.5.1.min.js') }}></script>
    <script src={{ url_for('static',filename='js/worldcloud.js') }}></script>
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <style>
        #Topo > div{
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        solid-color: aquamarine;
        }
        #Sankit > div{
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        solid-color: aquamarine;
        }
				#info div{
            color: transparent;
            background-color : #2bb4b4;
            text-shadow : rgba(255,255,255,0.5) 0 5px 6px, rgba(255,255,255,0.2) 1px 3px 3px;
            -webkit-background-clip : text;
            font-size: 25px;
						border: #20C997 2px solid;
        }
    </style>
</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
	</div>

<!-- Header Section -->
	<header class="header" style="width: 100%; padding: 1.5%;">
		<div class="row" style="padding-bottom: 0px;margin-bottom: 0px;">
			<div class="col-sm-4 col-md-3 order-2 order-sm-1">
				<div class="header__social">
					<a href="#"><i class="fa fa-circle"></i></a>
					<a href="#"><i class="fa fa-circle-o-notch"></i></a>
					<a href="#"><i class="fa fa-circle-thin"></i></a>
					
				</div>
			</div>
			<div class="col-sm-4 col-md-6 order-1  order-md-2 text-center">
				<a href="./index.html">
					<img src="../static/img/logo/logo3.png" />
				</a>	
			</div>
			<div class="col-sm-4 col-md-3 order-3 order-sm-3">
				<div class="header__switches">
					<a href="#"><i class="fa fa-circle-thin"></i></a>
					<a href="#"><i class="fa fa-circle-o-notch"></i></a>
					<a href="#"><i class="fa fa-circle"></i></a>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<nav class="main__menu">
				<ul class="nav__menu">
					<li><a href="/" style="fontSize:30px;" >功能目录</a></li>
          <li><a href="/shows" style="fontSize:30px;">数据概览</a></li>
					<li><a href="/trainSet" style="fontSize:30px;" >训练集分析</a></li>
					<li><a href="./test" style="fontSize:30px;" class="menu--active">测试集结果</a></li>

				</ul>
			</nav>

		</div>
	</header>
	<!-- Header Section end -->

	<!-- About Page -->
  <div id="Page" >
	<div id="Tree" style="width: 100%; height: 300px; padding: 1.5%;">
		 <div id="tree" style="width:100%;height: 100%;" ></div>
	</div>
  <div id="info" style="width: 100%;height: 50px; padding-left: 1.5%; padding-right:1.5%;line-height: 50px;">
		<div id="FileName" style="width: 25%; height: 100%; float: left;">文件名</div>
		<div id="NodeName" style="width: 25%; height: 100%;float: left;">根因节点名</div>
		<div id="TriggerName" style="width:50%; height: 100%;float: left;">告警类型信息</div>
	</div>
	<div id='Topo' style="width: 100%; height: 600px; padding: 0.5% 1.5% ;">
		<div id="Ztopo" style="width: 59%; height:100%; float: left;"></div>
        <div id="Jtopo" style="margin-left: 1%;width: 40%; height:100%; float: left;"></div>
	</div>
	<div id='Sankit' style="width: 100%; height: 400px; padding: 0.5% 1.5%;">
		<div id="Zero" style="width: 14%; height: 100%; float: left;" >节点桑基图0</div>
		<div id="One" style="width: 44%;margin-left: 1%; height: 100%; float: left;" >节点桑基图1</div>
		<div id="Two" style="width: 40%; height: 100%; float: right;" >节点桑基图2</div>
    </div>

   </div>
	<!-- About Page end -->

	<!-- Footer Section -->
	<footer class="footer__section">
		<div class="container">

			<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
		</div>
	</footer>
	<!-- Footer Section end -->


	<!--====== Javascripts & Jquery ======-->

    <script type="text/javascript" charset="utf8" src={{ url_for('static',filename="js/vendor/jquery-3.2.1.min.js") }}></script>
    <script type="text/javascript" charset="utf8" src={{ url_for('static',filename='js/jquery.slicknav.min.js') }}></script>
    <script type="text/javascript" charset="utf8" src={{ url_for('static',filename='js/slick.min.js') }}></script>
    <script type="text/javascript" charset="utf8" src={{ url_for('static',filename='js/fresco.min.js') }}></script>
    <script type="text/javascript" charset="utf8" src={{ url_for('static',filename='js/main.js') }}></script>
	</body>
<script type="text/javascript">
        // 树组织图
        var Sang = echarts.init(document.getElementById('tree'),'walden');
//         var struct_colors = [
//         '#ccff66', '#99ffff'
//     ];
        var RICH = {
            name: {
                color: '#fff',
                fontSize: 24
            },
            basic: {
                color: '#fff',
                fontSize: 8,
                lineHeight: 16

            }
        };
        var info2 = {
            "name": "file",
            "children": [{
                    "name": "无根因文件",
                    "children": [
                        {
                            "name": "19.csv",
                            "value": 0.99

                        },
                        {
                            "name": "18.csv",
                            "value": 0.99
                        },
                        {
                            "name": "17.csv",
                            "value": 0.99
                        },
                        {
                            "name": "14.csv",
                            "value": 0.99
                        },
                        {
                            "name": "11.csv",
                            "value": 0.99
                        },
                        {
                            "name": "5.csv",
                            "value": 0.99
                        },
                        {
                            "name": "4.csv",
                            "value": 0.99
                        },
                        {
                            "name": "3.csv",
                            "value": 0.99
                        },
                        {
                            "name": "2.csv",
                            "value": 0.99
                        },
                        {
                            "name": "0.csv",
                            "value": 0.99
                        }
                    ]
                },
                {
                    "name": "有根因文件",
                    "children": [
                        {
                            "name": "16.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_87\n\n告警类型：Nginx 80端口的连接数大于2000","value":1}]


                        },
                        {
                            "name": "15.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_71\n\n告警类型：**application 停止运行","value":1}]
                        },
                        {
                            "name": "13.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_40\n\n告警类型：端口8080通信异常","value":1}]
                        },
                        {
                            "name": "12.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_41\n\n告警类型：端口8080通信异常","value":1}]
                        },
                        {
                            "name": "10.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_90\n\n告警类型：Nginx 80端口的连接数大于2000","value":1}]
                        },
                        {
                            "name": "9.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_54\n\n告警类型：网卡流量unknown","value":1}]
                        },
                        {
                            "name": "8.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_69\n\n告警类型：日志报错:无法获取连接","value":1}]
                        },
                        {
                            "name": "7.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_50\n\n告警类型：硬盘Slot 00状态为Failed","value":1}]
                        },
                        {
                            "name": "6.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_44\n\n告警类型：Nginx 80端口的连接数大于2000","value":1}]
                        },
                        {
                            "name": "1.csv",
                            "value": 1,
							"children":[ {"name":"告警节点：node_87\n\n告警类型：url:http://node_87:80//访问失败","value":1}]
                        }
                    ]
                },



            ]
        };
        // var structs_datas = [];
        var formatUtil = echarts.format;
var shpgaojingstatic={'16.csv':['node_87','Nginx 80端口的连接数大于2000'],'15.csv':['node_71','：**application 停止运行'],'13.csv':['node_40','端口8080通信异常'],
'12.csv':['node_41','端口8080通信异常'],'10.csv':['node_90','Nginx 80端口的连接数大于2000'],'9.csv':['node_54','网卡流量unknown'],
'8.csv':['node_69','日志报错:无法获取连接'],'7.csv':['node_50','硬盘Slot 00状态为Failed'],'6.csv':['node_44','Nginx 80端口的连接数大于2000'],
'1.csv':['node_87','url:http://node_87:80//访问失败'],'0.csv':['无根因','无根因'],'2.csv':['node_87','Nginx 80端口的连接数大于2000'],
'3.csv':['node_87','Nginx 80端口的连接数大于2000'],'4.csv':['node_87','Nginx 80端口的连接数大于2000'],'5.csv':['node_87','Nginx 80端口的连接数大于2000'],
'11.csv':['node_87','Nginx 80端口的连接数大于2000'],'14.csv':['node_87','Nginx 80端口的连接数大于2000'],'17.csv':['node_87','Nginx 80端口的连接数大于2000'],
'18.csv':['node_87','Nginx 80端口的连接数大于2000'],'19.csv':['node_87','Nginx 80端口的连接数大于2000']};

    function showMenu(param) {

        var event = param.event;
        var pageX = event.offsetX;
        var pageY = event.offsetY;

        if(param.data===undefined){
               return;
        }
        var file = param.data.name.split(".")[0];
         if (param.data.value === 1) {
            //console.log(param.data.name);

            // console.log(file);
            var shpfilename = file + '.csv'
            $('#FileName').empty();
            $('#FileName').append('文件名：'+param.data.name);
            $('#NodeName').empty();
            $('#NodeName').append('节点名：'+shpgaojingstatic[param.data.name][0]);
            $('#TriggerName').empty();
            $('#TriggerName').append('告警类型：'+shpgaojingstatic[param.data.name][1]);

            getData(file,'root');
        }
         if (param.data.value === 0.99) {

           // $('#Jtopo').empty();
          // $('#Jtopo').append("无根因显示");
            $('#FileName').empty();
            $('#TriggerName').empty();
            $('#NodeName').empty();
            $('#NodeName').append("该文件无根因");
            getData(file,'no');
            }
        }

        // format_struct_data(info2.children, structs_datas);
        console.log(info2.children);
        Sang.setOption(option = {
            title: {
                text: '各文件根因信息概览',
                // subtext: '2020-02-19',
                //left: 'leafDepth'
            },
            tooltip: {

                formatter: function (info) {
                    //console.log('tool------', info);
                    var val = info.data.value;
                    var name = info.name;

                    return [
                        '<h4>' + name + '</>',
                        // '<div>Value:' + val + '</>',
                    ].join('\n');
                    // return [
                    //     '{name|' + name + '}',
                    //     '{basic| 资产数量：' + asset_num + '}',
                    // ].join('\n');
                },
                // rich: RICH, tooltip不支持富文本

            },

            series: [{
                name: 'file',
                left: 0,
                right: 0,
                type: 'treemap',
                visibleMin: 1,
                roam: false,
                // data: format_struct_data(info2.children, structs_datas),
                data: info2.children,
                leafDepth: 1,
                label: {
                    normal: {
                        show: true,
                        position: 'insideTopLeft',
                        formatter: function (a) {
                            //console.log('formatter==label=======', a);
                            return '{Name|' + a.name + '}';
                            // return [
                            //     '<div><h1>' + a.name + '</h1></div>',
                            //     '<div><p>' + a.value + '</></div>',
                            // ].join('');
                        },
                        textStyle: {
                            // color: '',  label的字体颜色
                            fontSize: '20',
                            fontWeight: 'bold'
                        },
                        rich: RICH,
                    },
                },
                breadcrumb: {
                    show: true,
                    "height": 22,
                    left: 0,
                    // top: "93%",
                    emptyItemWidth: 40,
                    itemStyle: {
                        normal: {
                            // color: "#fff",
                            // borderColor: "rgba(255,255,255,0.7)",
                            borderWidth: 1,
                            // shadowColor: "rgba(150,150,150,1)",
                            shadowBlur: 3,
                            shadowOffsetX: 0,
                            shadowOffsetY: 0,
//                             textStyle: {
//                                 color: "#000",
//                                 fontWeight: 'bold'
//                             }
                        },
                        emphasis: {
                            textStyle: {}
                        }
                    }
                },
            }]
        });

    document.oncontextmenu = function() {
        return false;
    };

    Sang.on('click', showMenu);
    </script>
    <script type="text/javascript">
     $(document).ready(function () {
          $('#FileName').empty();
            $('#FileName').append("文件名：1.csv");
            $('#NodeName').empty();
            $('#NodeName').append("节点名："+shpgaojingstatic["1.csv"][0]);
            $('#TriggerName').empty();
            $('#TriggerName').append("告警类型："+shpgaojingstatic["1.csv"][1]);
         getData(1);
        });
         function getData(dat,TYPE='root') {
             //var dat = $("#one").val();
             //var dat1 = $("#trainsets").val();
             console.log(dat);
						 echarts.init(document.getElementById('Ztopo')).dispose();
             $.ajax({
                 url: '/testData',
                 data: {'datas': dat},
                 type: 'GET',
                 async: true,
                 dataType: 'json',
                 beforeSend:function(){
                        $("#preloder").fadeIn();
                        $(".loader").fadeIn();

                 },
                 complete: function () {
                 $(".loader").fadeOut();
                $("#preloder").fadeOut("slow");
                },
                 success: function (Data) {
                 //总体拓扑及相关桑基图
                 var jChart = echarts.init(document.getElementById('Jtopo'),'walden');
                 if(TYPE === 'no'){
                     jChart.clear();
                 }

                 var ZChart = echarts.init(document.getElementById('Ztopo'),'walden');
                 var SankyData = Data['SankyD'];
                 {
                     //总体拓扑

                     var returnlist = Data['Ztopo'];
                     console.log(returnlist);
                     var root = returnlist['root'];
					 console.log(root);
                     var root_gj = returnlist['root_gj'];

                     var alldata = returnlist['alldata'];
                     var alllink = returnlist['alllink'];
                     var gjxx = returnlist['gjxx'];

                     var option = {
                         title: {
                             text: "总体拓扑图",
                             top: "top",
                             left: "left",
//                              textStyle: {
//                                  color: '#292421'
//                              }
                         },
                         // 	grid:{
                         //                       x:200,
                         //                       y:200,
                         //                       x2:200,
                         //                       y2:200
                         //                      },
                         tooltip: {                  // 提示框的配置
                             formatter: function (param) {
                                 if (param.dataType === 'edge') {
                                     // return param.data.category + ': ' + param.data.target;
                                     // return param.data.target;
                                     // return dic['{b}';
                                 }
                                 if (param.name == root) {
                                     return root_gj;
                                 }
                                 if (param.name == '0') {
                                     return gjxx['0'];
                                 }
                                 if (param.name == '1') {
                                     return gjxx['1'];
                                 }
                                 if (param.name == '2') {
                                     return gjxx['2'];
                                 }
                                 if (param.name == '3') {
                                     return gjxx['3'];
                                 }
                                 if (param.name == '4') {
                                     return gjxx['4'];
                                 }
                                 if (param.name == '5') {
                                     return gjxx['5'];
                                 }
                                 if (param.name == '6') {
                                     return gjxx['6'];
                                 }
                                 if (param.name == '7') {
                                     return gjxx['7'];
                                 }
                                 if (param.name == '8') {
                                     return gjxx['8'];
                                 }
                                 if (param.name == '9') {
                                     return gjxx['9'];
                                 }
                                 if (param.name == '10') {
                                     return gjxx['10'];
                                 }
                                 if (param.name == '11') {
                                     return gjxx['11'];
                                 }
                                 if (param.name == '12') {
                                     return gjxx['12'];
                                 }
                                 if (param.name == '13') {
                                     return gjxx['13'];
                                 }
                                 if (param.name == '14') {
                                     return gjxx['14'];
                                 }
                                 if (param.name == '15') {
                                     return gjxx['15'];
                                 }
                                 if (param.name == '16') {
                                     return gjxx['16'];
                                 }
                                 if (param.name == '17') {
                                     return gjxx['17'];
                                 }
                                 if (param.name == '18') {
                                     return gjxx['18'];
                                 }
                                 if (param.name == '19') {
                                     return gjxx['19'];
                                 }
                                 if (param.name == '20') {
                                     return gjxx['20'];
                                 }
                                 if (param.name == '21') {
                                     return gjxx['21'];
                                 }
                                 if (param.name == '22') {
                                     return gjxx['22'];
                                 }
                                 if (param.name == '23') {
                                     return gjxx['23'];
                                 }
                                 if (param.name == '24') {
                                     return gjxx['24'];
                                 }
                                 if (param.name == '25') {
                                     return gjxx['25'];
                                 }
                                 if (param.name == '26') {
                                     return gjxx['26'];
                                 }
                                 if (param.name == '27') {
                                     return gjxx['27'];
                                 }
                                 if (param.name == '28') {
                                     return gjxx['28'];
                                 }
                                 if (param.name == '29') {
                                     return gjxx['29'];
                                 }
                                 if (param.name == '30') {
                                     return gjxx['30'];
                                 }
                                 if (param.name == '31') {
                                     return gjxx['31'];
                                 }
                                 if (param.name == '32') {
                                     return gjxx['32'];
                                 }
                                 if (param.name == '33') {
                                     return gjxx['33'];
                                 }
                                 if (param.name == '34') {
                                     return gjxx['34'];
                                 }
                                 if (param.name == '35') {
                                     return gjxx['35'];
                                 }
                                 if (param.name == '36') {
                                     return gjxx['36'];
                                 }
                                 if (param.name == '37') {
                                     return gjxx['37'];
                                 }
                                 if (param.name == '38') {
                                     return gjxx['38'];
                                 }
                                 if (param.name == '39') {
                                     return gjxx['39'];
                                 }
                                 if (param.name == '40') {
                                     return gjxx['40'];
                                 }
                                 if (param.name == '41') {
                                     return gjxx['41'];
                                 }
                                 if (param.name == '42') {
                                     return gjxx['42'];
                                 }
                                 if (param.name == '43') {
                                     return gjxx['43'];
                                 }
                                 if (param.name == '44') {
                                     return gjxx['44'];
                                 }
                                 if (param.name == '45') {
                                     return gjxx['45'];
                                 }
                                 if (param.name == '46') {
                                     return gjxx['46'];
                                 }
                                 if (param.name == '47') {
                                     return gjxx['47'];
                                 }
                                 if (param.name == '48') {
                                     return gjxx['48'];
                                 }
                                 if (param.name == '49') {
                                     return gjxx['49'];
                                 }
                                 if (param.name == '50') {
                                     return gjxx['50'];
                                 }
                                 if (param.name == '51') {
                                     return gjxx['51'];
                                 }
                                 if (param.name == '52') {
                                     return gjxx['52'];
                                 }
                                 if (param.name == '53') {
                                     return gjxx['53'];
                                 }
                                 if (param.name == '54') {
                                     return gjxx['54'];
                                 }
                                 if (param.name == '55') {
                                     return gjxx['55'];
                                 }
                                 if (param.name == '56') {
                                     return gjxx['56'];
                                 }
                                 if (param.name == '57') {
                                     return gjxx['57'];
                                 }
                                 if (param.name == '58') {
                                     return gjxx['58'];
                                 }
                                 if (param.name == '59') {
                                     return gjxx['59'];
                                 }
                                 if (param.name == '60') {
                                     return gjxx['60'];
                                 }
                                 if (param.name == '61') {
                                     return gjxx['61'];
                                 }
                                 if (param.name == '62') {
                                     return gjxx['62'];
                                 }
                                 if (param.name == '63') {
                                     return gjxx['63'];
                                 }
                                 if (param.name == '64') {
                                     return gjxx['64'];
                                 }
                                 if (param.name == '65') {
                                     return gjxx['65'];
                                 }
                                 if (param.name == '66') {
                                     return gjxx['66'];
                                 }
                                 if (param.name == '67') {
                                     return gjxx['67'];
                                 }
                                 if (param.name == '68') {
                                     return gjxx['68'];
                                 }
                                 if (param.name == '69') {
                                     return gjxx['69'];
                                 }
                                 if (param.name == '70') {
                                     return gjxx['70'];
                                 }
                                 if (param.name == '71') {
                                     return gjxx['71'];
                                 }
                                 if (param.name == '72') {
                                     return gjxx['72'];
                                 }
                                 if (param.name == '73') {
                                     return gjxx['73'];
                                 }
                                 if (param.name == '74') {
                                     return gjxx['74'];
                                 }
                                 if (param.name == '75') {
                                     return gjxx['75'];
                                 }
                                 if (param.name == '76') {
                                     return gjxx['76'];
                                 }
                                 if (param.name == '77') {
                                     return gjxx['77'];
                                 }
                                 if (param.name == '78') {
                                     return gjxx['78'];
                                 }
                                 if (param.name == '79') {
                                     return gjxx['79'];
                                 }
                                 if (param.name == '80') {
                                     return gjxx['80'];
                                 }
                                 if (param.name == '81') {
                                     return gjxx['81'];
                                 }
                                 if (param.name == '82') {
                                     return gjxx['82'];
                                 }
                                 if (param.name == '83') {
                                     return gjxx['83'];
                                 }
                                 if (param.name == '84') {
                                     return gjxx['84'];
                                 }
                                 if (param.name == '85') {
                                     return gjxx['85'];
                                 }
                                 if (param.name == '86') {
                                     return gjxx['86'];
                                 }
                                 if (param.name == '87') {
                                     return gjxx['87'];
                                 }
                                 if (param.name == '88') {
                                     return gjxx['88'];
                                 }
                                 if (param.name == '89') {
                                     return gjxx['89'];
                                 }
                                 if (param.name == '90') {
                                     return gjxx['90'];
                                 }
                                 if (param.name == '91') {
                                     return gjxx['91'];
                                 }
                                 if (param.name == '92') {
                                     return gjxx['92'];
                                 }
                                 if (param.name == '93') {
                                     return gjxx['93'];
                                 }
                                 if (param.name == '94') {
                                     return gjxx['94'];
                                 }
                                 if (param.name == '95') {
                                     return gjxx['95'];
                                 }
                                 if (param.name == '96') {
                                     return gjxx['96'];
                                 }
                                 if (param.name == '97') {
                                     return gjxx['97'];
                                 }
                                 if (param.name == '98') {
                                     return gjxx['98'];
                                 }
                                 if (param.name == '99') {
                                     return gjxx['99'];
                                 }
                                 if (param.name == '100') {
                                     return gjxx['100'];
                                 }
                                 //return param.data.category + ': ' + param.data.name;
                                 return param.data.name;
                             }
                         },
                         // backgroundColor: '#FFFFFF',
                         legend: {
                             show: true,
                             data: [{
                                 name: 'SYS_1',

                             },
                                 {
                                     name: 'SYS_2',

                                 }, {
                                     name: 'SYS_3',

                                 },
                                 {
                                     name: 'SYS_4',

                                 },
                                 {
                                     name: 'SYS_5',

                                 },
                                 {
                                     name: 'SYS_6',

                                 },
                                 {
                                     name: 'SYS_7',

                                 },
                                 {
                                     name: 'SYS_8',

                                 },
                                 {
                                     name: 'SYS_9',

                                 },
                                 {
                                     name: 'SYS_10',

                                 },],

                             type: 'scroll',
                             orient: 'vertical',
                             left: 0,
                             bottom: 0,
                             itemWidth: 10,
                             itemHeight: 10
                         },
                         animationDuration: 0,
                         animationEasingUpdate: 'quinticInOut',
                         series: [{
                             name: '知识图谱',
                             type: 'graph',
                             layout: 'force',
                             focusNodeAdjacency: true,   // 是否在鼠标移到节点上的时候突出显示节点以及节点的边和邻接节点。[ default: false ]
                             center: ["50%", "50%"],
							 left:0,
							 right:0,
                             force: {
                                 repulsion: 300,
                                 gravity: 0.3,
                                 edgeLength: 15,
                                 layoutAnimation: true,
                             },
                             data: alldata,
                             links: alllink,
                             categories: [{},
                                 {'name': 'SYS_1'},
                                 {'name': 'SYS_2'},
                                 {'name': 'SYS_3'},
                                 {'name': 'SYS_4'},
                                 {'name': 'SYS_5'},
                                 {'name': 'SYS_6'},
                                 {'name': 'SYS_7'},
                                 {'name': 'SYS_8'},
                                 {'name': 'SYS_9'},
                                 {'name': 'SYS_10'}],
                             roam: true,
                             label: {
                                 normal: {
                                     show: true,
                                     position: 'inside',
                                     formatter: '{b}',
                                     fontSize: 10,
                                     fontStyle: '600',
                                 }
                             },
                             edgeSymbol: ['arrow'],                            // 'none' 不采用任何布局，使用节点中提供的 x， y 作为节点的位置。
                             edgeSymbolSize: [5, 12],
                             edgeLabel: {
                                 normal: {
//                                      textStyle: {
//                                          color: "#000",
//                                          fontSize: 100,
//                                          show: true
//                                      }
                                 }
                             },
                             lineStyle: {
                                 normal: {
                                     opacity: 0.9,
                                     width: 1.5,
                                     curveness: 0
                                 }
                             }
                         }]
                     };

                     // 使用刚指定的配置项和数据显示图表
                     ZChart.setOption(option);
                     var noRootFiles = [
                         '0','3','5','14','18','2','4','11','17','19'
                     ];
                     var name = 'node_' ;
                     //console.log(dat);
                     console.log(root);
                     if(noRootFiles.indexOf(dat.toString())!==-1){
                         name = name +alldata[0].name;
                     }
                     else{
                         name = name+ root;
                     }

                     console.log(name);
                     //console.log(SankyData)
                         var zeroData = SankyData[name][0];
                         var oneData = SankyData[name][1];
                         var twoData = SankyData[name][2];
                         //console.log();
                         var zeroChart = echarts.init(document.getElementById('Zero'),'walden');
                         var oneChart = echarts.init(document.getElementById('One'),'walden');
                         var twoChart = echarts.init(document.getElementById('Two'),'walden');
                         var zeroOption = {
                               title:{
                                 text: name+'节点告警'
                             },
							   tooltip: {
									trigger: "item",
									triggerOn: "mousemove"
							   },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
								 animation: true,
                                animationDuration: 1000,
                                animationEasing: "quadraticInOut",
                                animationEasingUpdate: "quadraticOut",
                                 data: zeroData.data,
                                 links: zeroData.link,
								 orient: "vertical",
								 label: {
								 	show: true,
								 	position: "insideLeft",
								 	rotate: 35,
								 	distance: 5
								 }
                             },

                         };
                         zeroChart.setOption(zeroOption);

                         var twoOption = {
                             title:{
                                 text: name+'两跳以内节点告警'
                             },
							 tooltip: {
							 	trigger: "item",
							 	triggerOn: "mousemove",
							 },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
                                 data: twoData.data,
                                 links: twoData.link,
								 orient: "vertical",
									label: {
									  show: true,
									  position: "insideLeft",
									  rotate: 35,
									  distance: 5
									}
                             },

                         };
                         twoChart.setOption(twoOption);

                         var oneOption = {
                              title:{
                                 text: name+'一跳以内节点告警'
                             },
							 tooltip: {
							 	trigger: "item",
							 	triggerOn: "mousemove",
							 },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
                                 data: oneData.data,
                                 links: oneData.link,
								 orient: "vertical",
								 label: {
								 	show: true,
								 	position: "insideLeft",
								 	rotate: 35,
								 	distance: 5
								 }
                             },

                         };
                         oneChart.setOption(oneOption);

                     ZChart.on('click', function (params) {
                         var name = 'node_' + params.data.name;
                         //console.log(name);
						 //console.log(SankyData)
                         var zeroData = SankyData[name][0];
                         var oneData = SankyData[name][1];
                         var twoData = SankyData[name][2];
                         //console.log();
                         var zeroChart = echarts.init(document.getElementById('Zero'),'walden');
                         var oneChart = echarts.init(document.getElementById('One'),'walden');
                         var twoChart = echarts.init(document.getElementById('Two'),'walden');
                         var zeroOption = {
                             title:{
                                 text: name+'节点告警'
                             },
							   tooltip: {
									trigger: "item",
									triggerOn: "mousemove"
							   },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
                                 data: zeroData.data,
                                 links: zeroData.link,
								 orient: "vertical",
								 label: {
								 	show: true,
								 	position: "insideLeft",
								 	rotate: 35,
								 	distance: 5
								 }
                             },

                         };
                         zeroChart.setOption(zeroOption);

                         var twoOption = {
                             title:{
                                 text: name+'两跳以内节点告警'
                             },
							 tooltip: {
							 	trigger: "item",
							 	triggerOn: "mousemove",
							 },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
                                 data: twoData.data,
                                 links: twoData.link,
								 orient: "vertical",
									label: {
									  show: true,
									  position: "insideLeft",
									  rotate: 35,
									  distance: 5
									}
                             },

                         };
                         twoChart.setOption(twoOption);

                         var oneOption = {
                              title:{
                                 text: name+'一跳以内节点告警'
                             },
							 tooltip: {
							 	trigger: "item",
							 	triggerOn: "mousemove",
							 },
                             series: {
                                 type: 'sankey',
                                 layout: 'none',
								 top:"15%",

                                 focusNodeAdjacency: 'allEdges',
                                 data: oneData.data,
                                 links: oneData.link,
								 orient: "vertical",
								 label: {
								 	show: true,
								 	position: "insideLeft",
								 	rotate: 35,
								 	distance: 5
								 }
                             },

                         };
                         oneChart.setOption(oneOption);

                     })

                        if(TYPE === 'root')  //局部
                         {

                            var returnlist=Data['Jtopo'];

                            var root=name;

                            var root_gj=name;
                            //console.log(returnlist['ztalldata']);
                            var alldata=returnlist['alldata'];
                            var alllink = returnlist['alllink'];
                            console.log(alllink);
                        var gjxx=returnlist['gjxx'];

                        var	option = {
                        title: {
                            text: name+"两跳以内拓扑图.csv",
                            top: "top",
                            left: "left",
//                             textStyle: {
//                                 color: '#292421'
//                             }
                        },
                        tooltip: {                  // 提示框的配置
                                formatter: function(param) {
                                    if (param.dataType === 'edge') {
                                        // return param.data.category + ': ' + param.data.target;
                                        // return param.data.target;
                                        // return '{b}';
                                    }
                                    if(param.name===root){
                                        return root_gj;
                                    }
                                    if(param.name==='0'){
                                                        return gjxx['0'];
                                                    }
                                                    if(param.name==='1'){
                                                        return gjxx['1'];
                                                    }
                                                    if(param.name==='2'){
                                                        return gjxx['2'];
                                                    }
                                                    if(param.name==='3'){
                                                        return gjxx['3'];
                                                    }
                                                    if(param.name==='4'){
                                                        return gjxx['4'];
                                                    }
                                                    if(param.name==='5'){
                                                        return gjxx['5'];
                                                    }
                                                    if(param.name==='6'){
                                                        return gjxx['6'];
                                                    }
                                                    if(param.name==='7'){
                                                        return gjxx['7'];
                                                    }
                                                    if(param.name==='8'){
                                                        return gjxx['8'];
                                                    }
                                                    if(param.name==='9'){
                                                        return gjxx['9'];
                                                    }
                                                    if(param.name==='10'){
                                                        return gjxx['10'];
                                                    }
                                                    if(param.name==='11'){
                                                        return gjxx['11'];
                                                    }
                                                    if(param.name=='12'){
                                                        return gjxx['12'];
                                                    }
                                                    if(param.name=='13'){
                                                        return gjxx['13'];
                                                    }
                                                    if(param.name=='14'){
                                                        return gjxx['14'];
                                                    }
                                                    if(param.name=='15'){
                                                        return gjxx['15'];
                                                    }
                                                    if(param.name=='16'){
                                                        return gjxx['16'];
                                                    }
                                                    if(param.name=='17'){
                                                        return gjxx['17'];
                                                    }
                                                    if(param.name=='18'){
                                                        return gjxx['18'];
                                                    }
                                                    if(param.name=='19'){
                                                        return gjxx['19'];
                                                    }
                                                    if(param.name=='20'){
                                                        return gjxx['20'];
                                                    }
                                                    if(param.name=='21'){
                                                        return gjxx['21'];
                                                    }
                                                    if(param.name=='22'){
                                                        return gjxx['22'];
                                                    }
                                                    if(param.name=='23'){
                                                        return gjxx['23'];
                                                    }
                                                    if(param.name=='24'){
                                                        return gjxx['24'];
                                                    }
                                                    if(param.name=='25'){
                                                        return gjxx['25'];
                                                    }
                                                    if(param.name=='26'){
                                                        return gjxx['26'];
                                                    }
                                    if(param.name=='27'){
                                                        return gjxx['27'];
                                                    }
                                                    if(param.name=='28'){
                                                        return gjxx['28'];
                                                    }
                                                    if(param.name=='29'){
                                                        return gjxx['29'];
                                                    }
                                                    if(param.name=='30'){
                                                        return gjxx['30'];
                                                    }
                                                    if(param.name=='31'){
                                                        return gjxx['31'];
                                                    }
                                                    if(param.name=='32'){
                                                        return gjxx['32'];
                                                    }
                                                    if(param.name=='33'){
                                                        return gjxx['33'];
                                                    }
                                                    if(param.name=='34'){
                                                        return gjxx['34'];
                                                    }
                                                    if(param.name=='35'){
                                                        return gjxx['35'];
                                                    }
                                                    if(param.name=='36'){
                                                        return gjxx['36'];
                                                    }
                                                    if(param.name=='37'){
                                                        return gjxx['37'];
                                                    }
                                                    if(param.name=='38'){
                                                        return gjxx['38'];
                                                    }
                                                    if(param.name=='39'){
                                                        return gjxx['39'];
                                                    }
                                                    if(param.name=='40'){
                                                        return gjxx['40'];
                                                    }
                                                    if(param.name=='41'){
                                                        return gjxx['41'];
                                                    }
                                                    if(param.name=='42'){
                                                        return gjxx['42'];
                                                    }
                                                    if(param.name=='43'){
                                                        return gjxx['43'];
                                                    }
                                                    if(param.name=='44'){
                                                        return gjxx['44'];
                                                    }
                                                    if(param.name=='45'){
                                                        return gjxx['45'];
                                                    }
                                                    if(param.name=='46'){
                                                        return gjxx['46'];
                                                    }
                                                    if(param.name=='47'){
                                                        return gjxx['47'];
                                                    }
                                                    if(param.name=='48'){
                                                        return gjxx['48'];
                                                    }
                                                    if(param.name=='49'){
                                                        return gjxx['49'];
                                                    }
                                                    if(param.name=='50'){
                                                        return gjxx['50'];
                                                    }
                                                    if(param.name=='51'){
                                                        return gjxx['51'];
                                                    }
                                                    if(param.name=='52'){
                                                        return gjxx['52'];
                                                    }
                                                    if(param.name=='53'){
                                                        return gjxx['53'];
                                                    }
                                                    if(param.name=='54'){
                                                        return gjxx['54'];
                                                    }
                                                    if(param.name=='55'){
                                                        return gjxx['55'];
                                                    }
                                                    if(param.name=='56'){
                                                        return gjxx['56'];
                                                    }
                                                    if(param.name=='57'){
                                                        return gjxx['57'];
                                                    }
                                                    if(param.name=='58'){
                                                        return gjxx['58'];
                                                    }
                                                    if(param.name=='59'){
                                                        return gjxx['59'];
                                                    }
                                                    if(param.name=='60'){
                                                        return gjxx['60'];
                                                    }
                                                    if(param.name=='61'){
                                                        return gjxx['61'];
                                                    }
                                                    if(param.name=='62'){
                                                        return gjxx['62'];
                                                    }
                                                    if(param.name=='63'){
                                                        return gjxx['63'];
                                                    }
                                                    if(param.name=='64'){
                                                        return gjxx['64'];
                                                    }
                                                    if(param.name=='65'){
                                                        return gjxx['65'];
                                                    }
                                                    if(param.name=='66'){
                                                        return gjxx['66'];
                                                    }
                                                    if(param.name=='67'){
                                                        return gjxx['67'];
                                                    }
                                                    if(param.name=='68'){
                                                        return gjxx['68'];
                                                    }
                                                    if(param.name=='69'){
                                                        return gjxx['69'];
                                                    }
                                                    if(param.name=='70'){
                                                        return gjxx['70'];
                                                    }
                                                    if(param.name=='71'){
                                                        return gjxx['71'];
                                                    }
                                                    if(param.name=='72'){
                                                        return gjxx['72'];
                                                    }
                                                    if(param.name=='73'){
                                                        return gjxx['73'];
                                                    }
                                                    if(param.name=='74'){
                                                        return gjxx['74'];
                                                    }
                                                    if(param.name=='75'){
                                                        return gjxx['75'];
                                                    }
                                                    if(param.name=='76'){
                                                        return gjxx['76'];
                                                    }
                                                    if(param.name=='77'){
                                                        return gjxx['77'];
                                                    }
                                                    if(param.name=='78'){
                                                        return gjxx['78'];
                                                    }
                                                    if(param.name=='79'){
                                                        return gjxx['79'];
                                                    }
                                                    if(param.name=='80'){
                                                        return gjxx['80'];
                                                    }
                                                    if(param.name=='81'){
                                                        return gjxx['81'];
                                                    }
                                                    if(param.name=='82'){
                                                        return gjxx['82'];
                                                    }
                                                    if(param.name=='83'){
                                                        return gjxx['83'];
                                                    }
                                                    if(param.name=='84'){
                                                        return gjxx['84'];
                                                    }
                                                    if(param.name=='85'){
                                                        return gjxx['85'];
                                                    }
                                                    if(param.name=='86'){
                                                        return gjxx['86'];
                                                    }
                                                    if(param.name=='87'){
                                                        return gjxx['87'];
                                                    }
                                                    if(param.name=='88'){
                                                        return gjxx['88'];
                                                    }
                                                    if(param.name=='89'){
                                                        return gjxx['89'];
                                                    }
                                                    if(param.name=='90'){
                                                        return gjxx['90'];
                                                    }
                                                    if(param.name=='91'){
                                                        return gjxx['91'];
                                                    }
                                                    if(param.name=='92'){
                                                        return gjxx['92'];
                                                    }
                                                    if(param.name=='93'){
                                                        return gjxx['93'];
                                                    }
                                                    if(param.name=='94'){
                                                        return gjxx['94'];
                                                    }
                                                    if(param.name=='95'){
                                                        return gjxx['95'];
                                                    }
                                                    if(param.name=='96'){
                                                        return gjxx['96'];
                                                    }
                                                    if(param.name=='97'){
                                                        return gjxx['97'];
                                                    }
                                                    if(param.name=='98'){
                                                        return gjxx['98'];
                                                    }
                                                    if(param.name=='99'){
                                                        return gjxx['99'];
                                                    }
                                                    if(param.name=='100'){
                                                        return gjxx['100'];
                                                    }
                                    //return param.data.category + ': ' + param.data.name;
                                    return param.data.name;
                                }
                            },
                        // backgroundColor: '#FFFFFF',
                        legend: {
                            show : true,
                            data : [ {
                                name : 'SYS_1',

                            },
                            {
                                name : 'SYS_2',

                            }, {
                                name : 'SYS_3',

                            },
                            {
                                name : 'SYS_4',

                            },
                            {
                                name : 'SYS_5',

                            },
                            {
                                name : 'SYS_6',

                            },
                            {
                                name : 'SYS_7',

                            },
                            {
                                name : 'SYS_8',

                            },
                            {
                                name : 'SYS_9',

                            },
                            {
                                name : 'SYS_10',

                            },],


                            type: 'scroll',
                            orient: 'vertical',
                            left: 0,
                            bottom: 0,
                            itemWidth: 10,
                            itemHeight: 10
                        },
                        animationDuration: 0,
                        animationEasingUpdate: 'quinticInOut',
                        series: [{
                            name: '知识图谱',
                            type: 'graph',
                            layout: 'force',
                            focusNodeAdjacency: true,   // 是否在鼠标移到节点上的时候突出显示节点以及节点的边和邻接节点。[ default: false ]
                                    force: {                // 力引导布局相关的配置项，力引导布局是模拟弹簧电荷模型在每两个节点之间添加一个斥力，每条边的两个节点之间添加一个引力，每次迭代节点会在各个斥力和引力的作用下移动位置，多次迭代后节点会静止在一个受力平衡的位置，达到整个模型的能量最小化。
                                                    // 力引导布局的结果有良好的对称性和局部聚合性，也比较美观。
                                repulsion: 1000,            // [ default: 50 ]节点之间的斥力因子(关系对象之间的距离)。支持设置成数组表达斥力的范围，此时不同大小的值会线性映射到不同的斥力。值越大则斥力越大
                                edgeLength: [150, 100]      // [ default: 30 ]边的两个节点之间的距离(关系对象连接线两端对象的距离,会根据关系对象值得大小来判断距离的大小)，
                                                            // 这个距离也会受 repulsion。支持设置成数组表达边长的范围，此时不同大小的值会线性映射到不同的长度。值越小则长度越长。如下示例:
                                                            // 值最大的边长度会趋向于 10，值最小的边长度会趋向于 50      edgeLength: [10, 50]
                            },
                            force: {
                                repulsion: 300,
                                gravity: 0.1,
                                edgeLength: 15,
                                layoutAnimation: true,
                            },
                            data: alldata,
                            links: alllink,
                            categories:[{},
                     {'name': 'SYS_1'},
                     {'name': 'SYS_2'},
                     {'name': 'SYS_3'},
                     {'name': 'SYS_4'},
                     {'name': 'SYS_5'},
                     {'name': 'SYS_6'},
                     {'name': 'SYS_7'},
                     {'name': 'SYS_8'},
                     {'name': 'SYS_9'},
                     {'name': 'SYS_10'}],
                            roam: true,
                            label: {
                                normal: {
                                    show: true,
                                    position: 'inside',
                                    formatter: '{b}',
                                    fontSize: 10,
                                    fontStyle: '600',
                                }
                            },
                            edgeSymbol: ['arrow'],                            // 'none' 不采用任何布局，使用节点中提供的 x， y 作为节点的位置。
                            edgeSymbolSize: [5, 12],
                            edgeLabel: {
                                normal: {
//                                     textStyle: {
//                                         color: "#000",
//                                         fontSize: 100,
//                                         show: true
//                                     }
                                }
                            },
                            lineStyle: {
                                normal: {
                                    opacity: 0.9,
                                    width: 1.5,
                                    curveness: 0
                                }
                            }
                        }]
                    };

                        // 使用刚指定的配置项和数据显示图表
                        jChart.setOption(option);
                     }
                 }
					 
				 },
             
             error: function (msg) {
                 console.log(msg);
                 alert('系统发生错误');
         }
             });
         }
    </script>
</html>
